{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/service/atorch-packet/asserts.ts","webpack:///./src/components/AtorchConsole/PrintReport/index.scss","webpack:///./src/service/atorch-packet/packet-meter-ac.ts","webpack:///./src/service/atorch-packet/packet-meter-dc.ts","webpack:///./src/service/atorch-packet/packet-meter-usb.ts","webpack:///./src/service/atorch-packet/packet-reply.ts","webpack:///./src/service/atorch-packet/types.ts","webpack:///./src/service/atorch-packet/utils.ts","webpack:///./src/service/atorch-packet/packet-command.ts","webpack:///./src/service/atorch-packet/index.ts","webpack:///./src/service/atorch-service.ts","webpack:///./src/components/AtorchConsole/index.scss","webpack:///./src/actions/atorch.ts","webpack:///./src/reducers/atorch.ts","webpack:///./src/reducers/report.ts","webpack:///./src/configureStore.ts","webpack:///./src/components/AtorchConsole/PrintReport/Report.tsx","webpack:///./src/components/AtorchConsole/PrintReport/Toolbar.tsx","webpack:///./src/components/AtorchConsole/PrintReport/utils.tsx","webpack:///./src/components/AtorchConsole/PrintReport/index.tsx","webpack:///./src/components/AtorchConsole/index.tsx","webpack:///./src/entry.tsx","webpack:///./src/reducers/index.ts","webpack:///./src/index.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","HEADER","Buffer","of","packetSize","assertPacket","block","type","isBuffer","Error","indexOf","readInt8","equals","assertMeterPacket","readUInt8","ACMeterPacket","this","mVoltage","mAmpere","mWatt","mWh","readUInt32BE","price","fee","frequency","readUInt16BE","pf","temperature","duration","backlightTime","freeze","seal","DCMeterPacket","Math","round","USBMeterPacket","mAh","dataN","dataP","readInt16BE","ReplyPacket","from","toString","values","includes","ReplyType","readPacket","readUInt24BE","offset","readDuration","String","padStart","join","makeChecksum","checksum","reduce","acc","makeCommandPacket","code","payload","alloc","writeUInt8","writeUInt32BE","concat","resetWh","resetAh","resetDuration","resetAll","setBacklightTime","time","clamp","setPrice","setPlus","setMinus","setup","enter","AtorchService","device","blocks","events","getCharacteristic","async","_a","server","gatt","connect","service","getPrimaryService","handleValueChanged","event","_b","target","buffer","emitBlock","addEventListener","emit","navigator","bluetooth","requestDevice","filters","services","characteristic","startNotifications","disconnect","removeAllListeners","writeValue","listener","on","off","console","log","toUpperCase","packet","createAsync","setConnected","updatePacket","params","dispatch","sendCommand","getState","atorch","undefined","case","done","state","connected","draft","latest","composeEnhancers","Report","record","createElement","Table","hover","borderless","size","className","table","map","button","index","Toolbar","memo","btnFn","ButtonGroup","builder","text","Button","outline","onClick","cb","FormattedUnit","unit","Number","isNaN","prefixes","min","floor","printed","pow","toFixed","CO2Name","Command","getCO2","SetupPriceCommand","FormattedTemperature","FormattedBacklightTime","SetupBacklightTimeCommand","Fragment","Row","props","color","btn","children","toFinite","alert","wh","message","defaultValue","minValue","maxValue","returns","globalThis","prompt","parseFloat","inRange","report","Container","container","store","history","router","exact","path","component","document","render","body","appendChild"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([67,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { makeChecksum } from './utils';\nexport const HEADER = Buffer.of(0xff, 0x55);\nconst packetSize = {\n    [1 /* Report */]: 36,\n    [2 /* Reply */]: 8,\n    [17 /* Command */]: 10,\n};\nexport function assertPacket(block, type) {\n    const length = packetSize[type];\n    if (!Buffer.isBuffer(block)) {\n        throw new Error('block not is Buffer object');\n    }\n    else if (block.indexOf(HEADER) !== 0) {\n        throw new Error('magic header not found');\n    }\n    else if (block.readInt8(0x02) !== type) {\n        throw new Error(`message type unexpected (expected: ${type})`);\n    }\n    else if (block.length !== length) {\n        throw new Error(`command packet size error (expected: ${length})`);\n    }\n    else if (!makeChecksum(block.slice(2, -1)).equals(block.slice(-1))) {\n        throw new Error(`checksum unexpected`);\n    }\n}\nexport function assertMeterPacket(block, type, name) {\n    if (block.readUInt8(0x03) !== type) {\n        throw new Error(`this is not a ${name} data packet`);\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"_1IfuHN8kkmV5g5ukwt7H5i\",\"btn\":\"_2qtmzPLZJ8hDDPGYrtCoxK\"};","import { assertMeterPacket, assertPacket } from './asserts';\nimport { readDuration, readUInt24BE } from './utils';\nconst type = 0x01;\nexport class ACMeterPacket {\n    constructor(block) {\n        this.type = type;\n        assertPacket(block, 1 /* Report */);\n        assertMeterPacket(block, type, 'AC Meter');\n        this.mVoltage = readUInt24BE(block, 0x04) * 100;\n        this.mAmpere = readUInt24BE(block, 0x07);\n        this.mWatt = readUInt24BE(block, 0x0a) * 100;\n        this.mWh = block.readUInt32BE(0x0d) * 10000;\n        this.price = readUInt24BE(block, 0x11) / 100;\n        this.fee = this.mWh * (this.price / 1000000);\n        this.frequency = block.readUInt16BE(0x14) / 10;\n        this.pf = block.readUInt16BE(0x16) / 1000;\n        this.temperature = block.readUInt16BE(0x18);\n        this.duration = readDuration(block, 0x1a);\n        this.backlightTime = block[0x1e];\n        Object.freeze(this);\n        Object.seal(this);\n    }\n}\n","import { assertMeterPacket, assertPacket } from './asserts';\nimport { readDuration, readUInt24BE } from './utils';\nconst type = 0x02;\nexport class DCMeterPacket {\n    constructor(block) {\n        this.type = type;\n        assertPacket(block, 1 /* Report */);\n        assertMeterPacket(block, type, 'DC Meter');\n        this.mVoltage = readUInt24BE(block, 0x04) * 100;\n        this.mAmpere = readUInt24BE(block, 0x07);\n        this.mWh = block.readUInt32BE(0x0a) * 10;\n        this.mWatt = Math.round((this.mVoltage * this.mAmpere) / 1000);\n        this.price = readUInt24BE(block, 0x11) / 100;\n        this.fee = this.mWh * (this.price / 1000000);\n        this.temperature = block.readUInt16BE(0x18);\n        this.duration = readDuration(block, 0x1a);\n        this.backlightTime = block[0x1e];\n        Object.freeze(this);\n        Object.seal(this);\n    }\n}\n","import { assertMeterPacket, assertPacket } from './asserts';\nimport { readDuration, readUInt24BE } from './utils';\nconst type = 0x03;\nexport class USBMeterPacket {\n    constructor(block) {\n        this.type = type;\n        assertPacket(block, 1 /* Report */);\n        assertMeterPacket(block, type, 'USB Meter');\n        this.mVoltage = readUInt24BE(block, 0x04) * 10;\n        this.mAmpere = readUInt24BE(block, 0x07) * 10;\n        this.mWatt = Math.round((this.mVoltage * this.mAmpere) / 1000);\n        this.mAh = readUInt24BE(block, 0x0a) * 10;\n        this.mWh = block.readUInt32BE(0x0d) * 10;\n        this.dataN = block.readUInt16BE(0x11) * 10;\n        this.dataP = block.readUInt16BE(0x13) * 10;\n        this.temperature = block.readInt16BE(0x15);\n        this.duration = readDuration(block, 0x17);\n        this.backlightTime = block[0x1b];\n        Object.freeze(this);\n        Object.seal(this);\n    }\n}\n","import { assertPacket } from './asserts';\nimport { ReplyType } from './types';\nexport class ReplyPacket {\n    constructor(block) {\n        assertPacket(block, 2 /* Reply */);\n        this.data = Buffer.from(block.slice(0x03, -1));\n        Object.freeze(this);\n        Object.seal(this);\n    }\n    toType() {\n        const type = this.data.toString('hex');\n        if (Object.values(ReplyType).includes(type)) {\n            return type;\n        }\n        return;\n    }\n}\n","export var ReplyType;\n(function (ReplyType) {\n    ReplyType[\"OK\"] = \"01010000\";\n    ReplyType[\"Unsupported\"] = \"01030000\";\n})(ReplyType || (ReplyType = {}));\n","import { ACMeterPacket } from './packet-meter-ac';\nimport { DCMeterPacket } from './packet-meter-dc';\nimport { USBMeterPacket } from './packet-meter-usb';\nimport { ReplyPacket } from './packet-reply';\nexport function readPacket(block) {\n    const type = block.readUInt8(0x02);\n    if (type === 1 /* Report */) {\n        switch (block.readUInt8(0x03)) {\n            case 0x01:\n                return new ACMeterPacket(block);\n            case 0x02:\n                return new DCMeterPacket(block);\n            case 0x03:\n                return new USBMeterPacket(block);\n        }\n    }\n    else if (type === 2 /* Reply */) {\n        return new ReplyPacket(block);\n    }\n    return;\n}\nexport function isMeterPacket(packet) {\n    return packet instanceof ACMeterPacket || packet instanceof DCMeterPacket || packet instanceof USBMeterPacket;\n}\nexport function readUInt24BE(block, offset) {\n    return (block.readInt8(offset) << 16) + block.readUInt16BE(offset + 1);\n}\nexport function readDuration(block, offset) {\n    const values = [\n        String(block.readUInt16BE(offset)).padStart(3, '0'),\n        String(block.readUInt8(offset + 2)).padStart(2, '0'),\n        String(block.readUInt8(offset + 3)).padStart(2, '0'),\n    ];\n    return values.join(':');\n}\nexport function makeChecksum(block) {\n    const checksum = block.reduce((acc, value) => (acc + value) & 0xff);\n    return Buffer.of(checksum ^ 0x44);\n}\n","import _ from 'lodash-es';\nimport { HEADER } from './asserts';\nimport { makeChecksum } from './utils';\nfunction makeCommandPacket(type, code, value = 0) {\n    const payload = Buffer.alloc(7);\n    payload.writeUInt8(17 /* Command */, 0);\n    payload.writeUInt8(type, 1);\n    payload.writeUInt8(code, 2);\n    payload.writeUInt32BE(value, 3);\n    return Buffer.concat([HEADER, payload, makeChecksum(payload)]);\n}\nexport default {\n    resetWh(type) {\n        return makeCommandPacket(type, 0x01);\n    },\n    resetAh(type) {\n        return makeCommandPacket(type, 0x02);\n    },\n    resetDuration(type) {\n        return makeCommandPacket(type, 0x03);\n    },\n    resetAll(type) {\n        return makeCommandPacket(type, 0x05);\n    },\n    setBacklightTime(type, time) {\n        return makeCommandPacket(type, 0x21, _.clamp(time, 0, 60));\n    },\n    setPrice(type, price) {\n        return makeCommandPacket(type, 0x22, _.clamp(price, 1, 999999));\n    },\n    setPlus(type) {\n        return makeCommandPacket(type, type !== 3 ? 0x11 : 0x33);\n    },\n    setMinus(type) {\n        return makeCommandPacket(type, type !== 3 ? 0x12 : 0x34);\n    },\n    setup(type) {\n        return makeCommandPacket(type, 0x31);\n    },\n    enter(type) {\n        return makeCommandPacket(type, 0x32);\n    },\n};\n","export * from './asserts';\nexport { default as CommandSet } from './packet-command';\nexport * from './packet-meter-ac';\nexport * from './packet-meter-dc';\nexport * from './packet-meter-usb';\nexport * from './packet-reply';\nexport * from './types';\nexport { isMeterPacket, readPacket } from './utils';\n","import { EventEmitter } from 'events';\nimport { readPacket, HEADER, assertPacket } from './atorch-packet';\nconst UUID_SERVICE = '0000ffe0-0000-1000-8000-00805f9b34fb';\nconst UUID_CHARACTERISTIC = '0000ffe1-0000-1000-8000-00805f9b34fb';\nconst DISCONNECTED = 'gattserverdisconnected';\nconst VALUE_CHANGED = 'characteristicvaluechanged';\nconst EVENT_FAILED = 'failed';\nconst EVENT_PACKET = 'packet';\nexport class AtorchService {\n    constructor(device) {\n        this.blocks = [];\n        this.events = new EventEmitter();\n        this.getCharacteristic = async () => {\n            var _a;\n            const server = await ((_a = this.device.gatt) === null || _a === void 0 ? void 0 : _a.connect());\n            const service = await (server === null || server === void 0 ? void 0 : server.getPrimaryService(UUID_SERVICE));\n            return service === null || service === void 0 ? void 0 : service.getCharacteristic(UUID_CHARACTERISTIC);\n        };\n        this.handleValueChanged = (event) => {\n            var _a, _b;\n            const target = event.target;\n            const payload = Buffer.from((_b = (_a = target.value) === null || _a === void 0 ? void 0 : _a.buffer) !== null && _b !== void 0 ? _b : []);\n            if (payload.indexOf(HEADER) === 0) {\n                if (this.blocks.length !== 0) {\n                    this.emitBlock(Buffer.concat(this.blocks));\n                }\n                this.blocks = [payload];\n            }\n            else {\n                this.blocks.push(payload);\n            }\n        };\n        this.device = device;\n        device.addEventListener(DISCONNECTED, () => {\n            this.events.emit('disconnected', false);\n        });\n    }\n    static async requestDevice() {\n        const device = await navigator.bluetooth.requestDevice({\n            filters: [{ services: [UUID_SERVICE] }],\n        });\n        return new AtorchService(device);\n    }\n    async connect() {\n        const characteristic = await this.getCharacteristic();\n        characteristic === null || characteristic === void 0 ? void 0 : characteristic.addEventListener(VALUE_CHANGED, this.handleValueChanged);\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.startNotifications());\n    }\n    async disconnect() {\n        var _a;\n        try {\n            (_a = this.device.gatt) === null || _a === void 0 ? void 0 : _a.disconnect();\n        }\n        catch {\n            // ignore\n        }\n        this.events.removeAllListeners();\n    }\n    async sendCommand(block) {\n        assertPacket(block, 17 /* Command */);\n        const characteristic = await this.getCharacteristic();\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.writeValue(block));\n    }\n    on(event, listener) {\n        this.events.on(event, listener);\n        return () => {\n            this.events.off(event, listener);\n        };\n    }\n    emitBlock(block) {\n        console.log('Block', block.toString('hex').toUpperCase());\n        try {\n            const packet = readPacket(block);\n            this.events.emit(EVENT_PACKET, packet);\n        }\n        catch {\n            this.events.emit(EVENT_FAILED, block);\n        }\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_2RIOZJ3crSATWdIZlIHFoS\"};","import actionCreatorFactory from 'typescript-fsa';\nimport { asyncFactory } from 'typescript-fsa-redux-thunk';\nimport { AtorchService } from '../service/atorch-service';\nconst create = actionCreatorFactory('ATORCH');\nconst createAsync = asyncFactory(create);\nexport const setConnected = create('SET_CONNECTED');\nexport const updatePacket = create('UPDATE_PACKET');\nexport const connect = createAsync('CONNECT', async (params, dispatch) => {\n    const device = await AtorchService.requestDevice();\n    dispatch(setConnected(true));\n    device.on('disconnected', () => {\n        dispatch(setConnected(false));\n    });\n    device.on('packet', (packet) => {\n        dispatch(updatePacket(packet));\n    });\n    await device.connect();\n    return device;\n});\nexport const disconnect = createAsync('DISCONNECT', async (params, dispatch, getState) => {\n    const { atorch } = getState();\n    return atorch === null || atorch === void 0 ? void 0 : atorch.disconnect();\n});\nexport const sendCommand = createAsync('SEND_COMMAND', async (block, dispatch, getState) => {\n    if (block === undefined) {\n        return;\n    }\n    const { atorch } = getState();\n    return atorch === null || atorch === void 0 ? void 0 : atorch.sendCommand(block);\n});\n","import { reducerWithInitialState } from 'typescript-fsa-reducers';\nimport { connect } from '../actions/atorch';\nexport default reducerWithInitialState(null).case(connect.async.done, (state, payload) => payload.result);\n","import { produce } from 'immer';\nimport { reducerWithInitialState } from 'typescript-fsa-reducers';\nimport { setConnected, updatePacket } from '../actions/atorch';\nimport { ReplyPacket } from '../service/atorch-packet';\nconst defaultState = {\n    connected: false,\n};\nexport default reducerWithInitialState(defaultState)\n    .case(setConnected, (state, connected) => produce(state, (draft) => {\n    draft.connected = connected;\n}))\n    .case(updatePacket, (state, packet) => produce(state, (draft) => {\n    if (packet === undefined) {\n        return;\n    }\n    else if (packet instanceof ReplyPacket) {\n        return;\n    }\n    else {\n        draft.latest = packet;\n    }\n}));\n","var _a;\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { createMemoryHistory } from 'history';\nimport { routerMiddleware } from 'connected-react-router';\nimport { createRootReducer } from './reducers';\nexport const history = createMemoryHistory();\nconst composeEnhancers = process.env.NODE_ENV === 'production' ? compose : (_a = Reflect.get(window, '__REDUX_DEVTOOLS_EXTENSION_COMPOSE__')) !== null && _a !== void 0 ? _a : compose;\nexport const configureStore = () => createStore(createRootReducer(history), undefined, composeEnhancers(applyMiddleware(routerMiddleware(history), // connected-react-router\nthunk)));\n","import classNames from 'classnames';\nimport _ from 'lodash-es';\nimport React from 'react';\nimport { Table } from 'reactstrap';\nimport locals from './index.scss';\nexport const Report = ({ record }) => (React.createElement(Table, { hover: true, borderless: true, size: 'sm', className: locals.table },\n    React.createElement(\"thead\", null,\n        React.createElement(\"tr\", null,\n            React.createElement(\"th\", { className: classNames('text-right', locals.name) }, \"#\"),\n            React.createElement(\"th\", { className: locals.value }, \"Value\"),\n            React.createElement(\"th\", null))),\n    React.createElement(\"tbody\", null, _.map(record, ([name, value, button], index) => (React.createElement(\"tr\", { key: index },\n        React.createElement(\"td\", { className: classNames('text-monospace', 'text-right') }, name),\n        React.createElement(\"td\", null, value),\n        React.createElement(\"td\", null, button)))))));\n","import _ from 'lodash-es';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { sendCommand } from '../../../actions/atorch';\nimport { CommandSet } from '../../../service/atorch-packet';\n// eslint-disable-next-line react/display-name\nexport const Toolbar = React.memo(({ type }) => {\n    const dispatch = useDispatch();\n    const btnFn = {\n        'Setup': CommandSet.setup.bind(null, type),\n        '\\u2795': CommandSet.setPlus.bind(null, type),\n        '\\u2796': CommandSet.setMinus.bind(null, type),\n        'Enter': CommandSet.enter.bind(null, type),\n        'Reset All': CommandSet.resetAll.bind(null, type),\n    };\n    const makeCommand = (cb) => () => {\n        dispatch(sendCommand(cb()));\n    };\n    return (React.createElement(ButtonGroup, null, _.map(btnFn, (builder, text) => (React.createElement(Button, { key: text, outline: true, onClick: makeCommand(builder) }, text)))));\n});\n","import React from 'react';\nexport const FormattedUnit = ({ value, unit }) => {\n    if (value === 0 || Number.isNaN(value)) {\n        return React.createElement(\"span\", { className: 'text-monospace' },\n            \"0 \",\n            unit);\n    }\n    const prefixes = ['m', '', 'k', 'M', 'T'];\n    const n = Math.min(Math.floor(Math.log(value) / Math.log(1000)), prefixes.length - 1);\n    value /= Math.pow(1000, n);\n    const printed = `${+value.toFixed(5)} ${prefixes[n]}${unit}`;\n    return React.createElement(\"span\", { className: 'text-monospace' }, printed);\n};\n","/* eslint-disable react/jsx-key */\nimport _ from 'lodash-es';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, Row } from 'reactstrap';\nimport { sendCommand } from '../../../actions/atorch';\nimport { ACMeterPacket, CommandSet, DCMeterPacket, USBMeterPacket } from '../../../service/atorch-packet';\nimport locals from './index.scss';\nimport { Report } from './Report';\nimport { Toolbar } from './Toolbar';\nimport { FormattedUnit } from './utils';\nconst CO2Name = (React.createElement(\"span\", null,\n    \"CO\",\n    React.createElement(\"sub\", null, \"2\")));\nexport const PrintReport = ({ packet }) => {\n    var _a;\n    const type = (_a = packet === null || packet === void 0 ? void 0 : packet.type) !== null && _a !== void 0 ? _a : 0;\n    let record;\n    if (packet instanceof ACMeterPacket) {\n        record = [\n            ['Voltage', React.createElement(FormattedUnit, { value: packet.mVoltage, unit: 'V' })],\n            ['Ampere', React.createElement(FormattedUnit, { value: packet.mAmpere, unit: 'A' })],\n            ['Watt', React.createElement(FormattedUnit, { value: packet.mWatt, unit: 'W' })],\n            ['W·h', React.createElement(FormattedUnit, { value: packet.mWh, unit: 'W\\u00B7h' }), React.createElement(Command, { onClick: CommandSet.resetWh.bind(null, type) }, \"Reset\")],\n            [CO2Name, React.createElement(FormattedUnit, { value: getCO2(packet.mWh), unit: 'g' })],\n            ['Price', `${packet.price.toFixed(2)} $/kW·h`, React.createElement(SetupPriceCommand, { type: type, value: packet.price })],\n            ['Fee', `${packet.fee.toFixed(5)} $`],\n            ['Frequency', `${packet.frequency.toFixed(1)} Hz`],\n            ['PF', packet.pf.toFixed(2)],\n            ['Temperature', React.createElement(FormattedTemperature, { value: packet.temperature })],\n            ['Duration', packet.duration],\n            ['Backlight Time', React.createElement(FormattedBacklightTime, { time: packet.backlightTime }), React.createElement(SetupBacklightTimeCommand, { type: type, value: packet.backlightTime })],\n        ];\n    }\n    else if (packet instanceof DCMeterPacket) {\n        record = [\n            ['Voltage', React.createElement(FormattedUnit, { value: packet.mVoltage, unit: 'V' })],\n            ['Ampere', React.createElement(FormattedUnit, { value: packet.mAmpere, unit: 'A' })],\n            ['Watt', React.createElement(FormattedUnit, { value: packet.mWatt, unit: 'W' })],\n            ['W·h', React.createElement(FormattedUnit, { value: packet.mWh, unit: 'W\\u00B7h' }), React.createElement(Command, { onClick: CommandSet.resetWh.bind(null, type) }, \"Reset\")],\n            [CO2Name, React.createElement(FormattedUnit, { value: getCO2(packet.mWh), unit: 'g' })],\n            ['Price', `${packet.price.toFixed(2)} $/kW·h`, React.createElement(SetupPriceCommand, { type: type, value: packet.price })],\n            ['Fee', `${packet.fee.toFixed(5)} $`],\n            ['Temperature', React.createElement(FormattedTemperature, { value: packet.temperature })],\n            ['Duration', packet.duration],\n            ['Backlight Time', React.createElement(FormattedBacklightTime, { time: packet.backlightTime }), React.createElement(SetupBacklightTimeCommand, { type: type, value: packet.backlightTime })],\n        ];\n    }\n    else if (packet instanceof USBMeterPacket) {\n        record = [\n            ['Voltage', React.createElement(FormattedUnit, { value: packet.mVoltage, unit: 'V' })],\n            ['Ampere', React.createElement(FormattedUnit, { value: packet.mAmpere, unit: 'A' })],\n            ['Watt', React.createElement(FormattedUnit, { value: packet.mWatt, unit: 'W' })],\n            ['A·h', React.createElement(FormattedUnit, { value: packet.mAh, unit: 'A\\u00B7h' }), React.createElement(Command, { onClick: CommandSet.resetAh.bind(null, type) }, \"Reset\")],\n            ['W·h', React.createElement(FormattedUnit, { value: packet.mWh, unit: 'W\\u00B7h' }), React.createElement(Command, { onClick: CommandSet.resetWh.bind(null, type) }, \"Reset\")],\n            [CO2Name, React.createElement(FormattedUnit, { value: getCO2(packet.mWh), unit: 'g' })],\n            ['USB D-', React.createElement(FormattedUnit, { value: packet.dataN, unit: 'V' })],\n            ['USB D+', React.createElement(FormattedUnit, { value: packet.dataP, unit: 'V' })],\n            ['Temperature', React.createElement(FormattedTemperature, { value: packet.temperature })],\n            ['Duration', packet.duration, React.createElement(Command, { onClick: CommandSet.resetDuration.bind(null, type) }, \"Reset\")],\n            ['Backlight Time', React.createElement(FormattedBacklightTime, { time: packet.backlightTime })],\n        ];\n    }\n    else {\n        return React.createElement(\"p\", null, \"Not connected to device.\");\n    }\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Row, { className: 'ml-2 justify-content-center' },\n            React.createElement(Report, { record: record })),\n        React.createElement(Row, { className: 'ml-2 justify-content-center' },\n            React.createElement(Toolbar, { type: type }))));\n};\nconst Command = (props) => {\n    const dispatch = useDispatch();\n    const handleClick = () => {\n        dispatch(sendCommand(props.onClick()));\n    };\n    return (React.createElement(Button, { color: 'link', size: 'sm', className: locals.btn, onClick: handleClick }, props.children));\n};\nconst SetupPriceCommand = ({ type, value }) => {\n    const onClick = () => {\n        const price = prompt('Setup Price (0 to 999.99)', value, 0, 1000);\n        if (price === undefined) {\n            alert(`input unexpected (0 to 999.99)`);\n            return;\n        }\n        console.log(price);\n        return CommandSet.setPrice(type, _.toFinite(price * 100));\n    };\n    return React.createElement(Command, { onClick: onClick }, \"Setup\");\n};\nconst SetupBacklightTimeCommand = ({ type, value }) => {\n    const onClick = () => {\n        const time = prompt('Setup Backlight Time (0 to 60)', value, 0, 60.01);\n        if (time === undefined) {\n            alert(`input unexpected (0 to 60)`);\n            return;\n        }\n        return CommandSet.setBacklightTime(type, _.toFinite(time));\n    };\n    return React.createElement(Command, { onClick: onClick }, \"Setup\");\n};\nconst FormattedTemperature = ({ value }) => (React.createElement(\"span\", null,\n    React.createElement(\"span\", null,\n        value,\n        \" \\u2103\"),\n    \", \",\n    React.createElement(\"span\", null,\n        (value * 9) / 5 + 32,\n        \" \\u2109\")));\nconst FormattedBacklightTime = ({ time }) => {\n    if (time === 0) {\n        return React.createElement(\"span\", null, \"Normally Closed\");\n    }\n    else if (time === 60) {\n        return React.createElement(\"span\", null, \"Normally Open\");\n    }\n    else {\n        return React.createElement(\"span\", null,\n            time,\n            \" sec\");\n    }\n};\nfunction getCO2(wh) {\n    return wh * 0.997;\n}\nfunction prompt(message, defaultValue, minValue, maxValue) {\n    const returns = globalThis.prompt(message, String(defaultValue));\n    const price = Number.parseFloat(returns !== null && returns !== void 0 ? returns : '-1');\n    if (!_.inRange(price, minValue, maxValue)) {\n        return;\n    }\n    return price;\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button, Container, Row } from 'reactstrap';\nimport { connect } from '../../actions/atorch';\nimport locals from './index.scss';\nimport { PrintReport } from './PrintReport';\nexport const AtorchConsole = () => {\n    const dispatch = useDispatch();\n    const connected = useSelector((state) => state.report.connected);\n    const latest = useSelector((state) => state.report.latest);\n    const onConnect = () => dispatch(connect());\n    return (React.createElement(Container, { className: locals.container },\n        React.createElement(Row, { className: 'ml-2 justify-content-center' },\n            React.createElement(Button, { outline: true, onClick: onConnect }, connected ? 'Disconnect' : 'Connect')),\n        React.createElement(PrintReport, { packet: latest })));\n};\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { Route, Switch } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { configureStore, history } from './configureStore';\nimport { AtorchConsole } from './components/AtorchConsole';\nconst store = configureStore();\nconst Entry = () => (React.createElement(Provider, { store: store },\n    React.createElement(ConnectedRouter, { history: history },\n        React.createElement(Switch, null,\n            React.createElement(Route, { exact: true, path: '/', component: AtorchConsole })))));\nexport default Entry;\n","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\nimport atorch from './atorch';\nimport report from './report';\nexport const createRootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    atorch,\n    report,\n});\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport ready from 'domready';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Entry from './entry';\nready(() => {\n    const container = document.createElement('main');\n    ReactDOM.render(React.createElement(Entry, null), container, () => {\n        document.body = document.createElement('body');\n        document.body.appendChild(container);\n    });\n});\n"],"sourceRoot":""}